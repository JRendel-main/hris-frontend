<div class="row">
  <div class="col-xs-12">
    <div class="box">
      <div class="box-header">
        <h3 class="box-title">Payroll Management</h3>
        <div class="box-tools">
          <div class="input-group input-group-sm" style="width: 150px;">
            <input type="text" name="table_search" class="form-control pull-right" placeholder="Search payroll...">
            <div class="input-group-btn">
              <button type="submit" class="btn btn-default"><i class="fa fa-search"></i></button>
            </div>
          </div>
        </div>
      </div>
      <!-- /.box-header -->
      <div class="box-body table-responsive no-padding">
        <table class="table table-hover">
          <thead>
            <tr>
              <th>Employee</th>
              <th>Base Salary</th>
              <th>Bonus</th>
              <th>Deductions</th>
              <th>Net Pay</th>
              <th>Pay Period</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="record in payroll">
              <td>{{ record.employee }}</td>
              <td>${{ record.baseSalary.toLocaleString() }}</td>
              <td>${{ record.bonus.toLocaleString() }}</td>
              <td>${{ record.deductions.toLocaleString() }}</td>
              <td><strong>${{ record.netPay.toLocaleString() }}</strong></td>
              <td>{{ record.payPeriod }}</td>
              <td>
                <span class="label label-success">Processed</span>
              </td>
              <td>
                <button class="btn btn-xs btn-info" title="View Payslip">
                  <i class="fa fa-eye"></i>
                </button>
                <button class="btn btn-xs btn-warning" title="Edit">
                  <i class="fa fa-edit"></i>
                </button>
                <button class="btn btn-xs btn-primary" title="Download">
                  <i class="fa fa-download"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <!-- /.box-body -->
    </div>
    <!-- /.box -->
  </div>
</div>

<!-- Payroll Statistics -->
<div class="row">
  <div class="col-lg-3 col-xs-6">
    <div class="small-box bg-aqua">
      <div class="inner">
        <h3>${{ payroll.reduce((sum, rec) => sum + rec.netPay, 0).toLocaleString() }}</h3>
        <p>Total Payroll</p>
      </div>
      <div class="icon">
        <i class="ion ion-cash"></i>
      </div>
      <div class="small-box-footer">&nbsp;</div>
    </div>
  </div>
  <div class="col-lg-3 col-xs-6">
    <div class="small-box bg-green">
      <div class="inner">
        <h3>${{ payroll.reduce((sum, rec) => sum + rec.bonus, 0).toLocaleString() }}</h3>
        <p>Total Bonuses</p>
      </div>
      <div class="icon">
        <i class="ion ion-trophy"></i>
      </div>
      <div class="small-box-footer">&nbsp;</div>
    </div>
  </div>
  <div class="col-lg-3 col-xs-6">
    <div class="small-box bg-yellow">
      <div class="inner">
        <h3>${{ payroll.reduce((sum, rec) => sum + rec.deductions, 0).toLocaleString() }}</h3>
        <p>Total Deductions</p>
      </div>
      <div class="icon">
        <i class="ion ion-minus"></i>
      </div>
      <div class="small-box-footer">&nbsp;</div>
    </div>
  </div>
  <div class="col-lg-3 col-xs-6">
    <div class="small-box bg-red">
      <div class="inner">
        <h3>{{ payroll.length }}</h3>
        <p>Employees Paid</p>
      </div>
      <div class="icon">
        <i class="ion ion-person-stalker"></i>
      </div>
      <div class="small-box-footer">&nbsp;</div>
    </div>
  </div>
</div>

<!-- Payroll Details -->
<div class="row">
  <div class="col-md-8">
    <div class="box box-primary">
      <div class="box-header with-border">
        <h3 class="box-title">Payroll Breakdown</h3>
        <div class="box-tools pull-right">
          <select class="form-control input-sm">
            <option>January 2025</option>
            <option>December 2024</option>
            <option>November 2024</option>
          </select>
        </div>
      </div>
      <div class="box-body">
        <div class="chart">
          <canvas id="payrollChart" style="height: 300px;"></canvas>
        </div>
      </div>
    </div>

    <!-- Tax Information -->
    <div class="box box-warning">
      <div class="box-header with-border">
        <h3 class="box-title">Tax Information</h3>
      </div>
      <div class="box-body">
        <div class="table-responsive">
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Tax Type</th>
                <th>Rate</th>
                <th>Amount</th>
                <th>Employee</th>
                <th>Employer</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Income Tax</td>
                <td>15%</td>
                <td>$12,500</td>
                <td>$10,000</td>
                <td>$2,500</td>
              </tr>
              <tr>
                <td>Social Security</td>
                <td>6.2%</td>
                <td>$4,875</td>
                <td>$2,437.50</td>
                <td>$2,437.50</td>
              </tr>
              <tr>
                <td>Medicare</td>
                <td>1.45%</td>
                <td>$1,138</td>
                <td>$569</td>
                <td>$569</td>
              </tr>
              <tr>
                <td>Unemployment</td>
                <td>0.6%</td>
                <td>$475</td>
                <td>$0</td>
                <td>$475</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <div class="col-md-4">
    <!-- Payroll Actions -->
    <div class="box box-solid">
      <div class="box-header with-border">
        <h3 class="box-title">Payroll Actions</h3>
      </div>
      <div class="box-body">
        <button class="btn btn-app btn-block">
          <i class="fa fa-play"></i> Process Payroll
        </button>
        <button class="btn btn-app btn-block">
          <i class="fa fa-file-pdf-o"></i> Generate Payslips
        </button>
        <button class="btn btn-app btn-block">
          <i class="fa fa-bank"></i> Direct Deposit
        </button>
        <button class="btn btn-app btn-block">
          <i class="fa fa-file-excel-o"></i> Export Data
        </button>
        <button class="btn btn-app btn-block">
          <i class="fa fa-history"></i> Payroll History
        </button>
        <button class="btn btn-app btn-block">
          <i class="fa fa-cog"></i> Settings
        </button>
      </div>
    </div>

    <!-- Upcoming Payroll -->
    <div class="box box-info">
      <div class="box-header with-border">
        <h3 class="box-title">Upcoming Payroll</h3>
      </div>
      <div class="box-body">
        <div class="callout callout-info">
          <h4>Next Payroll Run</h4>
          <p><strong>Date:</strong> January 31, 2025</p>
          <p><strong>Employees:</strong> 125</p>
          <p><strong>Estimated Total:</strong> $285,000</p>
        </div>
        <div class="progress">
          <div class="progress-bar progress-bar-info" style="width: 75%"></div>
        </div>
        <span class="text-muted">75% Prepared</span>
      </div>
    </div>

    <!-- Salary Ranges -->
    <div class="box box-success">
      <div class="box-header with-border">
        <h3 class="box-title">Salary Ranges</h3>
      </div>
      <div class="box-body">
        <div class="list-group">
          <a href="#" class="list-group-item">
            <i class="fa fa-dollar text-green"></i> Executive
            <span class="badge">$150K - $250K</span>
          </a>
          <a href="#" class="list-group-item">
            <i class="fa fa-dollar text-blue"></i> Manager
            <span class="badge">$80K - $120K</span>
          </a>
          <a href="#" class="list-group-item">
            <i class="fa fa-dollar text-yellow"></i> Professional
            <span class="badge">$60K - $90K</span>
          </a>
          <a href="#" class="list-group-item">
            <i class="fa fa-dollar text-red"></i> Administrative
            <span class="badge">$35K - $55K</span>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Salary Adjustments Modal -->
<div class="modal fade" id="salaryAdjustmentModal" tabindex="-1" role="dialog" aria-labelledby="salaryAdjustmentModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title" id="salaryAdjustmentModalLabel">Salary Adjustment</h4>
      </div>
      <div class="modal-body">
        <form>
          <div class="form-group">
            <label for="employeeSelect">Select Employee</label>
            <select class="form-control" id="employeeSelect">
              <option>Select Employee</option>
              <option>John Doe</option>
              <option>Jane Smith</option>
              <option>Bob Johnson</option>
              <option>Alice Brown</option>
              <option>Charlie Wilson</option>
            </select>
          </div>
          <div class="form-group">
            <label for="adjustmentType">Adjustment Type</label>
            <select class="form-control" id="adjustmentType">
              <option>Raise</option>
              <option>Bonus</option>
              <option>Deduction</option>
              <option>Commission</option>
            </select>
          </div>
          <div class="form-group">
            <label for="adjustmentAmount">Amount</label>
            <input type="number" class="form-control" id="adjustmentAmount" placeholder="Enter amount">
          </div>
          <div class="form-group">
            <label for="effectiveDate">Effective Date</label>
            <input type="date" class="form-control" id="effectiveDate">
          </div>
          <div class="form-group">
            <label for="adjustmentReason">Reason</label>
            <textarea class="form-control" id="adjustmentReason" rows="3" placeholder="Enter reason for adjustment"></textarea>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Apply Adjustment</button>
      </div>
    </div>
  </div>
</div>

<!-- Action buttons -->
<div class="row">
  <div class="col-xs-12">
    <button type="button" class="btn btn-success" data-toggle="modal" data-target="#salaryAdjustmentModal">
      <i class="fa fa-plus"></i> Salary Adjustment
    </button>
    <button type="button" class="btn btn-primary">
      <i class="fa fa-play-circle"></i> Run Payroll
    </button>
    <button type="button" class="btn btn-info">
      <i class="fa fa-file-pdf-o"></i> Generate Payslips
    </button>
    <button type="button" class="btn btn-warning">
      <i class="fa fa-bar-chart"></i> Payroll Reports
    </button>
    <button type="button" class="btn btn-danger">
      <i class="fa fa-bank"></i> Direct Deposit Setup
    </button>
  </div>
</div>
